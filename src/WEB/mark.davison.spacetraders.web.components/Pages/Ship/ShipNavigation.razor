<MudStack Row>
    @if (ShipNav.Status == "DOCKED")
    {
    <MudButton ButtonType="ButtonType.Submit"
               Color="Color.Primary"
               StartIcon="@Icons.Material.Filled.Outbound"
               Variant="Variant.Filled"
               Size="Size.Large"
               Disabled="@(ShipNav.Status == "IN_ORBIT" || _inProgress)"
               IconSize="Size.Large"
               OnClick="@MoveShipToOrbit">Orbit</MudButton>

    }
    else 
    {
    <MudButton ButtonType="ButtonType.Submit"
               Color="Color.Primary"
               StartIcon="@Icons.Material.Filled.TransitEnterexit"
               Variant="Variant.Filled"
               Size="Size.Large"
               Disabled="@(ShipNav.Status != "IN_ORBIT" || _inProgress)"
               IconSize="Size.Large"
               OnClick="@DockShip">Dock</MudButton>
    }
</MudStack>

@if (ShipNav.Status == "IN_TRANSIT")
{
    <MudText Typo="Typo.body1">@($"In transit from {ShipNavRoute.Origin} ({ShipNavRoute.OriginType}) to {ShipNavRoute.Destination} ({ShipNavRoute.DestinationType})")</MudText>
    <MudText Typo="Typo.body1">@($"Left {ShipNavRoute.Departure.Humanize()}, arriving {ShipNavRoute.Arrival.Humanize()}")</MudText>
}

@if (ShipNav.Status == "IN_ORBIT")
{
    @* 
        Control to search for waypoints by trait? or by waypoint type
    *@

    <MudStack Row>
        <MudTextField T="string" @bind-Text="NavigationSystemText" Label="Destination" />

        <MudButton ButtonType="ButtonType.Submit"
                   Color="Color.Primary"
                   StartIcon="@Icons.Material.Filled.Search"
                   Variant="Variant.Filled"
                   Size="Size.Small"
                   Disabled="@(string.IsNullOrEmpty(NavigationSystemText))"
                   IconSize="Size.Large"
                   OnClick="@(() => SearchDestination(NavigationSystemText))" />
    </MudStack>
    @if (NavigationDestination != null)
    {
        <MudPaper Class="pa-4">
            <MudText>@($"Waypoint: {NavigationDestination.WaypointSymbol}")</MudText>
            <MudText>@($"Type: {NavigationDestination.Type}")</MudText>
            <MudText>@($"Traits: {string.Join(", ", NavigationDestination.Traits)}")</MudText>            
            @if (Distance() is double distance)
            {
                <MudText>@($"Distance: {distance.ToString("N0")}")</MudText>
            }
        </MudPaper>
        <MudButton ButtonType="ButtonType.Submit"
                   Color="Color.Primary"
                   StartIcon="@Icons.Material.Filled.Navigation"
                   Variant="Variant.Filled"
                   Size="Size.Large"
                   Disabled="@(ShipNav.Status != "IN_ORBIT" || _inProgress)"
                   IconSize="Size.Large"
                   OnClick="@(() => GoToDestination(NavigationDestination))">Go</MudButton>
    }
}