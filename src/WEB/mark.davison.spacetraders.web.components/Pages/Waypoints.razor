@attribute [Route(Routes.Waypoints)]
@inherits FluxorComponent

<MudStack Class="pa-4">
    <MudStack Row AlignItems="AlignItems.End">
        <MudText Typo="Typo.h3">Waypoints</MudText>
        <MudSpacer />
    </MudStack>

    @if (WaypointState.Value.IsLoading)
    {
        <MudProgressCircular Indeterminate
                             Class="ma-auto"
                             Size="Size.Large" />
    }
    else if (WaypointState.Value.Waypoints.Any())
    {
        <MudStack Row>
            <MudSelect T="string" 
                       Clearable="true"
                       @bind-Value="SelectedTrait"
                       Label="Traits" 
                       AdornmentIcon="@Icons.Material.Filled.Search">
                @foreach (var trait in Traits)
                {
                    <MudSelectItem T="string" Value="@trait">@trait</MudSelectItem>
                }
            </MudSelect>
            <MudButton ButtonType="ButtonType.Submit"
                       Color="Color.Primary"
                       StartIcon="@Icons.Material.Filled.Search"
                       Variant="Variant.Filled"
                       Size="Size.Large"
                       Disabled="false"
                       IconSize="Size.Large"
                       OnClick="@Search">Search</MudButton>
        </MudStack>

        <MudTable Items="@WaypointState.Value.Waypoints" Hover>
            <HeaderContent>
                <MudTh>Symbol</MudTh>
                <MudTh>System symbol</MudTh>
                <MudTh>Type</MudTh>
                <MudTh>Traits</MudTh>
            </HeaderContent>
            <RowTemplate>
                <MudTd DataLabel="Symbol">
                    <MudLink Href="@RouteHelpers.Waypoint(context.SystemSymbol, context.WaypointSymbol)" Typo="Typo.body2">@context.WaypointSymbol</MudLink>
                </MudTd>
                <MudTd DataLabel="Symbol">
                    <MudText Typo="Typo.body2">@context.SystemSymbol</MudText>
                </MudTd>
                <MudTd DataLabel="Type">
                    <MudText Typo="Typo.body2">@context.Type</MudText>
                </MudTd>
                <MudTd DataLabel="Type">
                    <MudText Typo="Typo.body2">@string.Join(", ", context.Traits)</MudText>
                </MudTd>
            </RowTemplate>
        </MudTable>
    }
    else
    {
        <MudText Typo="Typo.body1">No ships</MudText>
    }
</MudStack>